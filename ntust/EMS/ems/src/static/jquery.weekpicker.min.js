/*
 *  jquery-weekpicker - v0.1.0
 *  jQuery Weekpicker plugin
 *  http://www.mihai-marica.ro
 *
 *  Made by Mihai Marica
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){return this.datePickerInput=a(b),this.datePickerId=i(this.datePickerInput),this.settings=a.extend({beforeShow:this.beforeShow,onClose:this.onClose,onSelect:this.onSelect},h,c),this.init(),f[this.datePickerId]=this,this}var f=[],g="WeekPicker",h={firstDay:1,dateFormat:"dd/mm/yy",showOtherMonths:!0,selectOtherMonths:!0,showWeek:!0,weekFormat:"w/oo"};a.extend(e.prototype,{init:function(){this.weekPickerInput=j(this.datePickerInput),this.datePickerInput.datepicker(this.settings),this.datePickerInput.hide(),this.weekPickerInput.focus(function(){this.datePickerInput.show().focus().hide()}.bind(this)),a("body").on("mousemove",".ui-weekpicker .ui-datepicker-calendar tr",function(){a(this).find("td a").addClass("ui-state-hover")}).on("mouseleave",".ui-weekpicker .ui-datepicker-calendar tr",function(){a(this).find("td a").removeClass("ui-state-hover")})},beforeShow:function(){a(this).datepicker("widget").addClass("ui-weekpicker")},onClose:function(){a(this).datepicker("widget").removeClass("ui-weekpicker")},onSelect:function(b,c){var d=k(c.id),e=a(this).datepicker("getDate"),f=e.getFullYear(),g=e.getMonth(),h=new Date(f,g,e.getDate()),i=a.datepicker.iso8601Week(h);i>50&&0===g&&f--;var j=d.settings.weekFormat;j=j.replace(/ww/g,l(i,2)),j=j.replace(/w/g,i),j=j.replace(/oo/g,f),j=j.replace(/o/g,f%100),d.weekPickerInput.val(j)}}),a.fn.weekpicker=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new e(this,b))})};var i=function(b){var c=b.attr("id");if(c===d){c=function(b){var c;do{c=b+Math.floor(4294967296*(1+Math.random())).toString(16).substring(1)}while(a("#"+c).length);return c}("datepicker_"),b.attr("id",c)}return c},j=function(b){var c=b.attr("id"),d=c+"_weekpicker",e=a('<input type="text" id="'+d+'" data-datepicker-id="'+c+'">');return b.after(e),b.data("weekpicker-id",d),e},k=function(a){return f[a]},l=function(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a}}(jQuery,window,document);